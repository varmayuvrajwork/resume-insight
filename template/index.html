<!DOCTYPE html>
<html lang="en">
<head>
      <meta charset="UTF-8">
      <title>Resume Insights Search</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
      <style>
      body {
            padding: 2rem;
            background-color: #f8f9fa;
      }
      #result {
            white-space: pre-wrap;
            background: #fff;
            border-radius: 6px;
            padding: 1rem;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
            max-height: 600px;
            overflow-y: auto;
      }
      #loadingSpinner {
            display: none;
      }
      table {
            font-size: 14px;
            word-break: break-word;
            }
      th {
            background-color: #f0f0f0;
            }
      </style>
</head>
<body>
      <div class="container">
      <h2 class="mb-4 text-center">üîç Resume Insights (AI Powered)</h2>
      <form id="queryForm" method="post">
            <div class="input-group mb-3">
            <input type="text" class="form-control" name="query" placeholder="Ask anything like 'Resumes with Python'" required>
            <button class="btn btn-primary" type="submit">Search</button>
            </div>
      </form>

      <div class="text-center my-3">
            <div id="loadingSpinner" class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
            </div>
      </div>

      {% if result %}
            <div id="result" class="mt-4">{{ result|safe }}</div>
                  <div class="text-end mt-3">
                        <a href="/download" class="btn btn-success">‚¨áÔ∏è Download CSV</a>
                  </div>
            </div>
      {% endif %}

      <script>
      const form = document.getElementById("queryForm");
      const spinner = document.getElementById("loadingSpinner");

      form.addEventListener("submit", () => {
            spinner.style.display = "inline-block";
      });
      </script>
</body>
</html>
